import {
    extractArtifactDataFromScriptUrl
} from '../../utils/artifact-utils';
export const extractArtifactsDataFromSentryEvent = event => {
    var _event$exception, _event$exception$valu, _event$exception$valu2, _event$exception$valu3;
    const artifacts = [];
    const map = new Map();
    const frames = ((_event$exception = event.exception) == null ? void 0 : (_event$exception$valu = _event$exception.values) == null ? void 0 : (_event$exception$valu2 = _event$exception$valu[0]) == null ? void 0 : (_event$exception$valu3 = _event$exception$valu2.stacktrace) == null ? void 0 : _event$exception$valu3.frames) || [];
    for (let i = frames.length - 1; i >= 0; i--) {
        const {
            filename
        } = frames[i];
        if (!filename) {
            continue;
        }
        const artifactData = extractArtifactDataFromScriptUrl(filename);
        if (!artifactData) {
            continue;
        }
        const {
            artifactId,
            artifactVersion
        } = artifactData;
        const key = artifactId + artifactVersion;
        if (map.has(key)) {
            continue;
        }
        map.set(key, true);
        artifacts.push(artifactData);
    }
    return artifacts;
};
//# sourceMappingURL=sentry-plugin-stacktrace.js.map